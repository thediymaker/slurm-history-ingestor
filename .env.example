# =============================================================================
# Slurm History Ingestor - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# The setup script can auto-generate this for you: ./setup.sh
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION (Required)
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgres://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=disable
DATABASE_URL=postgres://slurm_user:your_password@localhost:5432/slurm_history?sslmode=disable

# -----------------------------------------------------------------------------
# SLURM API CONFIGURATION (Required)
# -----------------------------------------------------------------------------
# Base URL of your Slurm REST API (slurmrestd)
SLURM_SERVER=http://your-slurm-server:6820

# Slurm user account for API authentication
SLURM_API_ACCOUNT=slurm

# JWT token for Slurm API authentication
# Generate with: scontrol token lifespan=3600
SLURM_API_TOKEN=your_jwt_token_here

# -----------------------------------------------------------------------------
# CLUSTER CONFIGURATION (Required)
# -----------------------------------------------------------------------------
# Unique identifier for this cluster (used in multi-cluster setups)
CLUSTER_NAME=mycluster

# -----------------------------------------------------------------------------
# OPTIONAL SETTINGS
# -----------------------------------------------------------------------------
# How often to sync jobs (in seconds). Default: 300 (5 minutes)
SYNC_INTERVAL=300

# Slurm REST API version. Default: v0.0.41
SLURM_API_VERSION=v0.0.41

# Initial sync start date for first run (format: YYYY-MM-DD). Default: 2024-01-01
# Set this to control how far back to sync job history on first run.
INITIAL_SYNC_DATE=2024-01-01

# -----------------------------------------------------------------------------
# PERFORMANCE TUNING (adjust if you experience timeouts)
# -----------------------------------------------------------------------------
# Hours per API request. Lower = fewer jobs per request = less likely to timeout.
# For busy clusters, try 6 or even 1. For quiet clusters, 24 is fine. Default: 24
CHUNK_HOURS=24

# HTTP timeout in seconds for Slurm API requests. Default: 120
# Increase if you have slow network or large job counts.
HTTP_TIMEOUT=120

# Enable debug logging. Default: false
DEBUG=false

